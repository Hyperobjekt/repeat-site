(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{8301:function(e,t,r){"use strict";r.r(t);var n=r(5893),s=r(1385),a=r(809),i=r.n(a),c=r(6265),l=r(2447),o=r(7294),u=r(1163),p=r(9704),f=r(1946),d=r(7254),m=r(7973),v=r(6215),g=r(3802),b=r(4326),x=r(7615);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=f.Z.Panel;function w(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}t.default=function(e){var t=e.filters,r=e.setFilterClasses,a=e.policy,c=(0,u.useRouter)(),h=(0,p.I0)(),O=(0,o.useState)("National"),k=O[0],N=O[1],F=(0,o.useState)({}),S=F[0],P=F[1],T=(0,o.useState)("undefined"!==typeof localStorage&&"true"===localStorage.isFilterDrawerOpen),Z=T[0],C=T[1];(0,o.useEffect)((0,l.Z)(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=q(),e.next=3,h((0,b.dm)(y({},t)));case 3:r=e.sent,n=r.filters.usStates.filter((function(e){return e.active})),N(n[0].label);case 6:case"end":return e.stop()}}),e)}))),[]);var q=function(){var e={};return e.state=c.query.state,e.category=c.query.categories?c.query.categories.split(","):[],e.subcategory=c.query.subcategories?c.query.subcategories.split(","):[],e},E=function(e){var t=!!e.length;localStorage.setItem("isFilterDrawerOpen",t),C(t)},D=function(e){var r=(0,s.Z)(t.levelOneFilters).map((function(t){return y(y({},t),{},{active:(t.slug!==e.slug||!t.active)&&(t.active||t.slug===e.slug)})})),n=r.filter((function(e){return e.active})).map((function(e){return e.slug})),i=(0,s.Z)(t.levelTwoFilters).map((function(e){return y(y({},e),{},{active:n.includes(e.slug)})})),c=y(y({},t),{},{levelOneFilters:r,levelTwoFilters:i}),l=y(y({},S),{},{policy:a,category:e.slug});r.filter((function(e){return e.active})).length||delete l.category,h((0,b.gz)(c)),h((0,x.qc)(l)),P(l)},I=function(e){var r=y({},c.query);delete r.comparison;var n=(0,s.Z)(t.levelTwoFilters).map((function(t){return y(y({},t),{},{active:(t.slug!==e.slug||!t.active)&&(t.active||t.slug===e.slug)})})),i=n.filter((function(e){return e.active})).map((function(e){return e.slug})),l=y(y({},t),{},{levelTwoFilters:n}),o=y(y({},S),{},{policy:a,subcategory:e.slug});n.filter((function(e){return e.active})).length||delete o.subcategory,r.state=r.state||"national",r.subcategories=i.join(","),h((0,b.gz)(l)),h((0,x.qc)(y(y({},r),{},{policy:a}))),P(o)},_=function(e){var t=q();localStorage.setItem("comparison",e),h((0,b.dm)(y({},t)))},z=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"pl-0 py-2",children:"Filter by"}),(0,n.jsx)(d.Z,{rotate:Z?180:0,className:"align-baseline pl-4"})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:"flex-item",children:t?function(e){return(0,n.jsxs)("div",{className:"flex px-2 border-b-4 border-repeat",children:[(0,n.jsx)("div",{className:"benchmark"===e.comparison?"flex-item px-3 text-sm pt-2 pb-1 cursor-pointer mx-2 bg-repeat text-white font-bold rounded-t-md":"flex-item px-3 text-sm pt-2 pb-1 cursor-pointer mx-2 border-repeat-neutral border-l-2 border-t-2 border-r-2 rounded-t-md",onClick:function(){_("benchmark")},children:"Benchmark"}),(0,n.jsx)("div",{className:"timeseries"===e.comparison?"flex-item px-3 text-sm pt-2 pb-1 cursor-pointer mx-2 bg-repeat text-white font-bold rounded-t-md":"flex-item px-3 text-sm pt-2 pb-1 cursor-pointer mx-2 border-repeat-neutral border-l-2 border-t-2 border-r-2 rounded-t-md",onClick:function(){_("timeseries")},children:"Time Series"})]})}(t):null})}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:"flex-item pt-5",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"pt-8",children:"Scope (select state or national)"}),(0,n.jsx)(m.v,{as:"div",className:"relative inline-block text-left z-10",children:function(e){var r=e.open;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsxs)(m.v.Button,{className:"inline-flex justify-center w-full rounded-md px-4 py-2 bg-repeat-black text-sm font-medium text-white hover:bg-repeat-neutral hover:text-repeat-dark",children:[k,(0,n.jsx)(g.v4q,{className:"-mr-1 ml-2 h-5 w-5","aria-hidden":"true"})]})}),(0,n.jsx)(v.u,{show:r,as:o.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,n.jsx)(m.v.Items,{static:!0,className:"origin-top-right absolute left-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,n.jsx)("div",{className:"py-1 h-60 overflow-auto",children:t?t.usStates.map((function(e){return(0,n.jsx)(m.v.Item,{children:function(r){var i=r.active;return(0,n.jsx)("button",{onClick:function(){return function(e){var r=(0,s.Z)(t.usStates).map((function(t){return y(y({},t),{},{active:t.slug===e.slug})})),n=y(y({},t),{},{usStates:r}),i=y(y({},S),{},{policy:a,state:e.slug});h((0,b.gz)(n)),h((0,x.qc)(i)),N(e.label),P(i)}(e)},className:w(i?"bg-gray-100 text-gray-900":"text-gray-700","w-full text-left block px-4 py-2 text-sm"),children:e.label})}},e.slug)})):null})})})]})}})]})})}),(0,n.jsx)("div",{className:"py-8",children:t?function(e){var t=(0,s.Z)(e.levelOneFilters).map((function(e,t){return y(y({},e),{},{class:r(e.color,e.active)})})).filter((function(e){return"IMPACTS"!==e.label})),a=(0,s.Z)(e.levelTwoFilters).filter((function(e){return"impacts"!==e.levelOneSlug})).map((function(e,n){return e.class=r(e.color,e.active),e.visible=!!t.filter((function(t){return t.slug===e.levelOneSlug})).filter((function(e){return e.active})).length,e}));return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(f.Z,{ghost:!0,bordered:!1,defaultActiveKey:Z?["1"]:[],onChange:E,className:"site-collapse-custom-collapse clickable",children:(0,n.jsxs)(j,{header:z,showArrow:!1,children:[(0,n.jsx)("div",{className:"py-2",children:"Category"}),(0,n.jsx)("div",{className:"block pt-3 px-3",children:t.map((function(e){return(0,n.jsx)("div",{className:w(e.class,"cursor-pointer"),onClick:function(){D(e)},children:e.label},e.slug)}))}),a.filter((function(e){return e.visible})).length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"py-2",children:"Subcategory"}),(0,n.jsx)("div",{className:"block pt-3 px-3",children:a.filter((function(e){return e.visible})).map((function(e,t){return(0,n.jsx)("div",{className:w(e.class,"cursor-pointer"),onClick:function(){I(e)},children:e.label},t)}))})]}):null]},"1")})})}(t):null})]})}},4326:function(e,t,r){"use strict";r.d(t,{gz:function(){return u},dm:function(){return f}});var n=r(809),s=r.n(n),a=r(6265),i=r(2447),c=r(9089);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=function(e){return{type:c.Lx,filters:e}},p=function(){var e=(0,i.Z)(s().mark((function e(t){var r,n,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Headers).append("Content-Type","application/json"),a={method:"GET",headers:n,redirect:"follow"},e.next=5,fetch("/api/filters",a);case 5:if(200!==(i=e.sent).status){e.next=10;break}return e.next=9,i.json();case 9:r=e.sent;case 10:return r.usStates=r.usStates.map((function(e){return o(o({},e),{},{active:e.slug===t.state})})),r.levelOneFilters=r.levelOneFilters.map((function(e){return o(o({},e),{},{active:t.category.includes(e.slug)})})),r.levelTwoFilters=r.levelTwoFilters.map((function(e){return o(o({},e),{},{active:t.subcategory.includes(e.slug)})})),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){return function(){var t=(0,i.Z)(s().mark((function t(r){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e);case 2:return n=t.sent,t.next=5,r(u(n));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},7615:function(e,t,r){"use strict";r.d(t,{qc:function(){return u}});var n=r(809),s=r.n(n),a=r(2447),i=r(9089);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:i.lr,count:e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:i.rw,scenarios:e}}var o=function(){var e=(0,a.Z)(s().mark((function e(t){var r,n,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&"),(n=new Headers).append("Content-Type","application/json"),a={method:"GET",headers:n,redirect:"follow"},e.next=6,fetch("/api/scenarios?".concat(r),a);case 6:if(200!==(i=e.sent).status){e.next=11;break}return e.next=10,i.json();case 10:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){return function(){var t=(0,a.Z)(s().mark((function t(r){var n,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},Object.keys(e).forEach((function(t){return"categories"===t?n._category=e[t].split(","):"subcategories"===t?n._subcategory=e[t].split(","):"limit"===t?n.limit=Number(e[t]):"page"!==t?n["_".concat(t)]=e[t]:void(n.skip=(Number(e[t])-1)*(Number(e.limit)||window.PAGE_LIMIT))})),t.next=4,o(n);case 4:return a=t.sent,t.next=7,r(c(a.count));case 7:return t.next=9,r(l(a.data||a));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}}]);